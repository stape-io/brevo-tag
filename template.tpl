___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Brevo",
  "categories": [
    "ANALYTICS",
    "CONVERSIONS",
    "MARKETING"
  ],
  "brand": {
    "id": "github.com_stape-io",
    "displayName": "stape-io",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Sends events to the Brevo",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "apiVersion",
    "displayName": "API Version",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "v2",
        "displayValue": "v2"
      },
      {
        "value": "v3",
        "displayValue": "v3"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "v2",
    "help": "Only change the API version if necessary, as it may disrupt your existing implementation. Be sure to test thoroughly before making any modifications."
  },
  {
    "type": "RADIO",
    "name": "type",
    "displayName": "Type",
    "radioItems": [
      {
        "value": "trackPage",
        "displayValue": "Track page view"
      },
      {
        "value": "trackEvent",
        "displayValue": "Track event"
      },
      {
        "value": "trackLink",
        "displayValue": "Track link click"
      },
      {
        "value": "identify",
        "displayValue": "Identify the user"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "trackPage"
  },
  {
    "type": "TEXT",
    "name": "clientKey",
    "displayName": "Client Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "How to get it for:\n\u003cbr\u003e\n\u003cbr\u003e\nv2: \u003ca href\u003d\"https://developers.brevo.com/docs/tracker-rest-implementation#authentication\" target\u003d\"_blank\"\u003eLearn more\u003c/a\u003e.\n\u003cbr\u003e\n\u003cbr\u003e\nv3: \u003ca href\u003d\"https://developers.brevo.com/docs/getting-started#using-your-api-key-to-authenticate\" target\u003d\"_blank\"\u003eLearn more\u003c/a\u003e."
  },
  {
    "type": "TEXT",
    "name": "email",
    "displayName": "Email",
    "simpleValueType": true,
    "alwaysInSummary": false,
    "help": "Email of the user. \u003cbr\u003e\u003cbr\u003e v2: required. \u003cbr\u003e\u003cbr\u003e v3: optional, but at least one user identifier must be sent. Check \u003ci\u003eCustomer Identifiers\u003c/i\u003e section below."
  },
  {
    "type": "TEXT",
    "name": "event",
    "displayName": "Event Name",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "alwaysInSummary": false,
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "trackEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "link",
    "displayName": "Link",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "alwaysInSummary": false,
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "trackLink",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "page",
    "displayName": "Page",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "alwaysInSummary": false,
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "trackPage",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "storeEmail",
    "checkboxText": "Store email in cookies",
    "simpleValueType": true,
    "help": "Allow storing the email in cookies if it is provided and use it as a fallback if it is not provided for the current event."
  },
  {
    "type": "CHECKBOX",
    "name": "useOptimisticScenario",
    "checkboxText": "Use Optimistic Scenario",
    "simpleValueType": true,
    "help": "The tag will call gtmOnSuccess() without waiting for a response from the API. This will speed up sGTM response time however your tag will always return the status fired successfully even in case it is not."
  },
  {
    "type": "GROUP",
    "name": "customerPropertiesGroup",
    "displayName": "Customer Attributes",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "customerProperties",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "identify",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "customerIdentifiersGroup",
    "displayName": "Customer Identifiers",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "LABEL",
        "name": "customerIdentifiersGroupHelpText",
        "displayName": "Only for v3. \u003cbr\u003e Identifies the contact associated with the event. At least one identifier is required. Check \u003ci\u003eEmail\u003c/i\u003e field above."
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "customerIdentifiers",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "SELECT",
            "isUnique": true,
            "selectItems": [
              {
                "value": "ext_id",
                "displayValue": "External ID"
              },
              {
                "value": "phone_id",
                "displayValue": "Phone Number"
              }
            ],
            "macrosInSelect": false
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "apiVersion",
        "paramValue": "v3",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "propertiesGroup",
    "displayName": "Properties",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "properties",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "identify",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "eventDataGroup",
    "displayName": "Event Data",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "propertiesEvent",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Name",
            "name": "name",
            "type": "TEXT",
            "isUnique": true
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "trackEvent",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "consentSettingsGroup",
    "displayName": "Consent Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "adStorageConsent",
        "displayName": "",
        "radioItems": [
          {
            "value": "optional",
            "displayValue": "Send data always"
          },
          {
            "value": "required",
            "displayValue": "Send data in case marketing consent given"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "optional"
      }
    ]
  },
  {
    "displayName": "Logs Settings",
    "name": "logsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const sendHttpRequest = require('sendHttpRequest');
const getAllEventData = require('getAllEventData');
const JSON = require('JSON');
const getCookieValues = require('getCookieValues');
const setCookie = require('setCookie');
const getContainerVersion = require('getContainerVersion');
const logToConsole = require('logToConsole');
const getRequestHeader = require('getRequestHeader');
const makeTableMap = require('makeTableMap');
const getType = require('getType');

const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = isLoggingEnabled ? getRequestHeader('trace-id') : undefined;

const eventData = getAllEventData();

if (!isConsentGivenOrNotRequired()) {
  return data.gtmOnSuccess();
}

const url = eventData.page_location || getRequestHeader('referer');

if (url && url.lastIndexOf('https://gtm-msr.appspot.com/', 0) === 0) {
  return data.gtmOnSuccess();
}

// Fallback to V2, which is the one being used in the Gallery when this change was made.
const API_VERSION = data.apiVersion || 'v2';

let email = data.email;
if (data.storeEmail) {
  if (!email) email = getCookieValues('brevo_email')[0];
  else storeCookie('email', email);
}

switch (data.type) {
  case 'trackPage':
    sendEvent('page_view', formatEventPayloadByApiVersion('trackPage'));
    break;
  case 'trackEvent':
    sendEvent(data.event, formatEventPayloadByApiVersion('trackEvent'));
    break;
  case 'trackLink':
    sendEvent('link', formatEventPayloadByApiVersion('trackLink'));
    break;
  case 'identify':
    sendEvent('identify', formatEventPayloadByApiVersion('identify'));
    break;
  default:
    data.gtmOnSuccess();
}

function sendEvent(eventName, brevoEventData) {
  if (areThereRequiredFieldsMissing(brevoEventData)) {
    if (isLoggingEnabled) {
      logToConsole(
        JSON.stringify({
          Name: 'Brevo',
          Type: 'Message',
          TraceId: traceId,
          EventName: eventName,
          Message: 'Request was not sent. API ' + API_VERSION,
          Reason:
            'One or more fields are missing: v2: Email; v3: Email, Phone Number or External ID.'
        })
      );
    }
    return data.gtmOnFailure();
  }

  const url = getRequestUrl();

  if (isLoggingEnabled) {
    logToConsole(
      JSON.stringify({
        Name: 'Brevo',
        Type: 'Request',
        TraceId: traceId,
        EventName: eventName,
        RequestMethod: 'POST',
        RequestUrl: url,
        RequestBody: brevoEventData
      })
    );
  }

  sendHttpRequest(
    url,
    (statusCode, headers, body) => {
      if (isLoggingEnabled) {
        logToConsole(
          JSON.stringify({
            Name: 'Brevo',
            Type: 'Response',
            TraceId: traceId,
            EventName: eventName,
            ResponseStatusCode: statusCode,
            ResponseHeaders: headers,
            ResponseBody: body
          })
        );
      }
      
      if (!data.useOptimisticScenario) {
        if (statusCode >= 200 && statusCode < 300) {
          data.gtmOnSuccess();
        } else {
          data.gtmOnFailure();
        }
      }
    },
    {
      headers: getRequestHeaders(),
      method: 'POST'
    },
    JSON.stringify(brevoEventData)
  );

  if (data.useOptimisticScenario) {
    data.gtmOnSuccess();
  }
}

function formatEventPayloadByApiVersion(event) {
  const eventPayloadByApiVersion = {
    v2: {
      trackPage: () => ({
        properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        email: email,
        page: data.page
      }),
      trackEvent: () => ({
        properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        eventData: data.propertiesEvent
          ? makeTableMap(data.propertiesEvent, 'name', 'value')
          : {},
        email: email,
        event: data.event
      }),
      trackLink: () => ({
        properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        email: email,
        link: data.link
      }),
      identify: () => ({
        attributes: data.customerProperties
          ? makeTableMap(data.customerProperties, 'name', 'value')
          : {},
        email: email
      })
    },
    v3: {
      trackPage: () => ({
        event_name: 'page_view',
        identifiers: mergeObj(
          { email_id: email },
          data.customerIdentifiers
            ? makeTableMap(data.customerIdentifiers, 'name', 'value')
            : {}
        ),
        event_properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        page: data.page
      }),
      trackEvent: () => ({
        event_name: data.event,
        identifiers: mergeObj(
          { email_id: email },
          data.customerIdentifiers
            ? makeTableMap(data.customerIdentifiers, 'name', 'value')
            : {}
        ),
        contact_properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        event_properties: data.propertiesEvent
          ? makeTableMap(data.propertiesEvent, 'name', 'value')
          : {}
      }),
      trackLink: () => ({
        event_name: 'link',
        identifiers: mergeObj(
          { email_id: email },
          data.customerIdentifiers
            ? makeTableMap(data.customerIdentifiers, 'name', 'value')
            : {}
        ),
        event_properties: data.properties
          ? makeTableMap(data.properties, 'name', 'value')
          : {},
        link: data.link
      }),
      identify: () => ({
        event_name: 'identify',
        identifiers: mergeObj(
          { email_id: email },
          data.customerIdentifiers
            ? makeTableMap(data.customerIdentifiers, 'name', 'value')
            : {}
        ),
        contact_properties: data.customerProperties
          ? makeTableMap(data.customerProperties, 'name', 'value')
          : {}
      })
    }
  };

  return eventPayloadByApiVersion[API_VERSION][event]();
}

function areThereRequiredFieldsMissing(brevoEventData) {
  const requiredFieldsValidationByApiVersion = {
    v2: () => {
      if (!isValidValue(brevoEventData.email)) return true;
      return false;
    },
    v3: () => {
      if (
        ['email_id', 'phone_id', 'ext_id'].every(
          (p) => !isValidValue(brevoEventData.identifiers[p])
        )
      ) {
        return true;
      }
      return false;
    }
  };
  return requiredFieldsValidationByApiVersion[API_VERSION]();
}

function getRequestUrl() {
  const baseUrlByApiVersion = {
    v2: 'https://in-automate.brevo.com/api/v2/' + data.type,
    v3: 'https://api.brevo.com/v3/events'
  };
  return baseUrlByApiVersion[API_VERSION];
}

function getRequestHeaders() {
  const baseHeaders = {
    'Content-Type': 'application/json',
    Accept: 'application/json'
  };
  const headersByApiVersion = {
    v2: { 'ma-key': data.clientKey },
    v3: { 'api-key': data.clientKey }
  };
  return mergeObj(baseHeaders, headersByApiVersion[API_VERSION]);
}

function storeCookie(name, value) {
  setCookie('brevo_' + name, value, {
    domain: 'auto',
    path: '/',
    samesite: 'Lax',
    secure: true,
    'max-age': 63072000, // 2 years
    httpOnly: false
  });
}

function isValidValue(value) {
  const valueType = getType(value);
  return valueType !== 'null' && valueType !== 'undefined' && value !== '';
}

function mergeObj(target, source) {
  for (const key in source) {
    if (source.hasOwnProperty(key)) target[key] = source[key];
  }
  return target;
}

function isConsentGivenOrNotRequired() {
  if (data.adStorageConsent !== 'required') return true;
  if (eventData.consent_state) return !!eventData.consent_state.ad_storage;
  const xGaGcs = eventData['x-ga-gcs'] || ''; // x-ga-gcs is a string like "G110"
  return xGaGcs[2] === '1';
}

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  const isDebug = !!(
    containerVersion &&
    (containerVersion.debugMode || containerVersion.previewMode)
  );

  if (!data.logType) {
    return isDebug;
  }

  if (data.logType === 'no') {
    return false;
  }

  if (data.logType === 'debug') {
    return isDebug;
  }

  return data.logType === 'always';
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://in-automate.brevo.com/*"
              },
              {
                "type": 1,
                "string": "https://api.brevo.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "referer"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "brevo_email"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "brevo_email"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: V2 - Track page view
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');

    mockData.apiVersion = 'v2';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.email = expectedValue;
    mockData.properties = inputTableMapForProperties;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://in-automate.brevo.com/api/v2/' + mockData.type);
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['ma-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.email).isEqualTo(expectedValue);
      assertThat(bodyParsed.page).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V2 - Track event
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');

    mockData.apiVersion = 'v2';
    mockData.type = 'trackEvent';
    mockData.event = expectedValue;
    mockData.email = expectedValue;
    mockData.propertiesEvent = inputTableMapForProperties;
    mockData.properties = inputTableMapForProperties;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://in-automate.brevo.com/api/v2/' + mockData.type);
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['ma-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.eventData).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.email).isEqualTo(expectedValue);
      assertThat(bodyParsed.event).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V2 - Track link click
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');

    mockData.apiVersion = 'v2';
    mockData.type = 'identify';
    mockData.email = expectedValue;
    mockData.customerProperties = inputTableMapForProperties;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://in-automate.brevo.com/api/v2/' + mockData.type);
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['ma-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.attributes).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.email).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V2 - Identify user
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');

    mockData.apiVersion = 'v2';
    mockData.type = 'trackLink';
    mockData.link = expectedValue;
    mockData.email = expectedValue;
    mockData.properties = inputTableMapForProperties;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://in-automate.brevo.com/api/v2/' + mockData.type);
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['ma-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.email).isEqualTo(expectedValue);
      assertThat(bodyParsed.link).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V2 - Save user email in cookie if checkbox is enabled
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v3';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.storeEmail = true;
    mockData.email = expectedValue;

    runCode(mockData);

    assertApi('setCookie').wasCalledWith('brevo_email', expectedValue, {
      domain: 'auto',
      path: '/',
      samesite: 'Lax',
      secure: true,
      'max-age': 63072000,
      httpOnly: false,
    });
- name: V2 - Use user email from cookie if checkbox is enabled
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v2';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.storeEmail = true;
    mockData.email = undefined;

    mock('getCookieValues', [expectedValue]);

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(bodyParsed.email).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V2 - Request is not sent when there are missing required user indentifiers
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v2';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.email = undefined;

    runCode(mockData);

    assertApi('sendHttpRequest').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
- name: V3 - Track page view
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');
    const inputTableMapForIdentifiers = [{ name: 'ext_id', value: expectedValue }, { name: 'phone_id', value: expectedValue }];
    const expectedObjectForIdentifiers = makeTableMap(inputTableMapForIdentifiers, 'name', 'value');

    mockData.apiVersion = 'v3';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.email = expectedValue;
    mockData.properties = inputTableMapForProperties;
    mockData.customerIdentifiers = inputTableMapForIdentifiers;

    expectedObjectForIdentifiers.email_id = mockData.email;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://api.brevo.com/v3/events');
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['api-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.event_name).isEqualTo('page_view');
      assertThat(bodyParsed.page).isEqualTo(expectedValue);
      assertThat(bodyParsed.event_properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.identifiers).isEqualTo(expectedObjectForIdentifiers);
    });

    runCode(mockData);
- name: V3 - Track event
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');
    const inputTableMapForIdentifiers = [{ name: 'ext_id', value: expectedValue }, { name: 'phone_id', value: expectedValue }];
    const expectedObjectForIdentifiers = makeTableMap(inputTableMapForIdentifiers, 'name', 'value');

    mockData.apiVersion = 'v3';
    mockData.type = 'trackEvent';
    mockData.event = expectedValue;
    mockData.email = expectedValue;
    mockData.propertiesEvent = inputTableMapForProperties;
    mockData.properties = inputTableMapForProperties;
    mockData.customerIdentifiers = inputTableMapForIdentifiers;

    expectedObjectForIdentifiers.email_id = mockData.email;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://api.brevo.com/v3/events');
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['api-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.event_name).isEqualTo(expectedValue);
      assertThat(bodyParsed.event_properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.contact_properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.identifiers).isEqualTo(expectedObjectForIdentifiers);
    });

    runCode(mockData);
- name: V3 - Track link click
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');
    const inputTableMapForIdentifiers = [{ name: 'ext_id', value: expectedValue }, { name: 'phone_id', value: expectedValue }];
    const expectedObjectForIdentifiers = makeTableMap(inputTableMapForIdentifiers, 'name', 'value');

    mockData.apiVersion = 'v3';
    mockData.type = 'trackLink';
    mockData.email = expectedValue;
    mockData.link = expectedValue;
    mockData.properties = inputTableMapForProperties;
    mockData.customerIdentifiers = inputTableMapForIdentifiers;

    expectedObjectForIdentifiers.email_id = mockData.email;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://api.brevo.com/v3/events');
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['api-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.event_name).isEqualTo('link');
      assertThat(bodyParsed.link).isEqualTo(expectedValue);
      assertThat(bodyParsed.event_properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.identifiers).isEqualTo(expectedObjectForIdentifiers);
    });

    runCode(mockData);
- name: V3 - Identify user
  code: |-
    const expectedValue = 'test';
    const inputTableMapForProperties = [{ name: expectedValue, value: expectedValue }];
    const expectedObjectForProperties = makeTableMap(inputTableMapForProperties, 'name', 'value');
    const inputTableMapForIdentifiers = [{ name: 'ext_id', value: expectedValue }, { name: 'phone_id', value: expectedValue }];
    const expectedObjectForIdentifiers = makeTableMap(inputTableMapForIdentifiers, 'name', 'value');

    mockData.apiVersion = 'v3';
    mockData.type = 'identify';
    mockData.email = expectedValue;
    mockData.customerProperties = inputTableMapForProperties;
    mockData.customerIdentifiers = inputTableMapForIdentifiers;

    expectedObjectForIdentifiers.email_id = mockData.email;

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(url).isEqualTo('https://api.brevo.com/v3/events');
      assertThat(options.method).isEqualTo('POST');
      assertThat(options.headers['api-key']).isEqualTo(mockData.clientKey);
      assertThat(bodyParsed.event_name).isEqualTo('identify');
      assertThat(bodyParsed.contact_properties).isEqualTo(expectedObjectForProperties);
      assertThat(bodyParsed.identifiers).isEqualTo(expectedObjectForIdentifiers);
    });

    runCode(mockData);
- name: V3 - Save user email in cookie if checkbox is enabled
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v3';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.storeEmail = true;
    mockData.email = expectedValue;

    runCode(mockData);

    assertApi('setCookie').wasCalledWith('brevo_email', expectedValue, {
      domain: 'auto',
      path: '/',
      samesite: 'Lax',
      secure: true,
      'max-age': 63072000,
      httpOnly: false,
    });
- name: V3 - Use user email from cookie if checkbox is enabled
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v3';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;
    mockData.storeEmail = true;
    mockData.email = undefined;

    mock('getCookieValues', [expectedValue]);

    mock('sendHttpRequest', function(url, callback, options, body) {
      const bodyParsed = JSON.parse(body);
      assertThat(bodyParsed.identifiers.email_id).isEqualTo(expectedValue);
    });

    runCode(mockData);
- name: V3 - Request is not sent when there are missing required user indentifiers
  code: |-
    const expectedValue = 'test';

    mockData.apiVersion = 'v3';
    mockData.type = 'trackPage';
    mockData.page = expectedValue;

    runCode(mockData);

    assertApi('sendHttpRequest').wasNotCalled();
    assertApi('gtmOnFailure').wasCalled();
setup: |-
  const mockData = {
    clientKey: '123'
  };

  const JSON = require('JSON');
  const makeTableMap = require('makeTableMap');


___NOTES___

Created on 28/07/2023, 15:15:15


